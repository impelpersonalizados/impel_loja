<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Online</title>

  <link rel="stylesheet" href="../assets/css/base.css" />
  <link rel="stylesheet" href="../assets/css/layout.css" />
  <link rel="stylesheet" href="../assets/css/components.css" />

  <style>
    .box{ max-width: 980px; margin: 0 auto; }
    .field{ display:flex; flex-direction:column; gap:6px; margin: 10px 0; }
    textarea{ min-height: 120px; padding:12px; border-radius:12px; border:1px solid var(--border); }
    input,select{ padding:12px; border-radius:12px; border:1px solid var(--border); }

    .grid2{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 860px){ .grid2{ grid-template-columns: 1fr; } }

    .miniBox{ padding:12px; border:1px solid var(--border); border-radius:12px; background:#fff; }

    /* Lista imagens */
    .imagesList{ margin-top: 10px; }
    .image-item{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px;
      border:1px solid var(--border);
      border-radius:12px;
      background:#fff;
      margin-bottom:10px;
    }
    .image-item img{
      width:72px;
      height:72px;
      object-fit:cover;
      border-radius:10px;
      pointer-events:none;
      border:1px solid rgba(0,0,0,.06);
    }
    .image-item .meta{
      flex:1;
      min-width: 0;
    }
    .image-item .meta .url{
      font-size: 12px;
      color: var(--muted);
      word-break: break-all;
      line-height: 1.35;
    }
    .image-item .meta .badge{
      display:inline-block;
      font-size: 12px;
      font-weight: 900;
      padding: 4px 10px;
      border-radius: 999px;
      background: #f7f4ff;
      border: 1px solid #e5dcff;
      margin-bottom: 6px;
      color:#2b1d43;
    }
    .img-actions{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .btn-mini{
      padding:8px 10px;
      border-radius:10px;
      border:1px solid var(--border);
      background:#fff;
      cursor:pointer;
      font-weight:900;
      font-size: 12px;
      white-space: nowrap;
    }
    .btn-mini:hover{ border-color: var(--brand); }
    .btn-danger{
      border-color:#ffc9c9 !important;
      background:#fff1f1 !important;
      color:#8a1c1c !important;
    }
    .btn-danger:hover{ border-color:#ff7b7b !important; }
  </style>
</head>

<body>
  <main class="container">
    <div class="box card">
      <h1 style="margin-top:0;">Admin (Online)</h1>
      <p class="muted">
        Este painel salva no servidor (Cloudflare KV) e faz upload no R2.
      </p>

      <div class="field">
        <label><b>ADMIN TOKEN</b></label>
        <input id="adminToken" type="password" placeholder="Cole seu ADMIN_TOKEN aqui" />
      </div>

      <hr class="sep"/>

      <div class="grid2">
        <div class="field">
          <label>Nome do produto</label>
          <input id="title" />
        </div>
        <div class="field">
          <label>Código (opcional)</label>
          <input id="code" />
        </div>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Preço Pix (ex: 5,00)</label>
          <input id="pixPrice" placeholder="5,00" />
        </div>
        <div class="field">
          <label>Preço cartão (opcional)</label>
          <input id="cardPrice" placeholder="5,00" />
        </div>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Parcelas</label>
          <input id="installments" type="number" min="1" max="12" />
        </div>
        <div class="field">
          <label>Valor parcela</label>
          <input id="installmentValue" placeholder="5,00" />
        </div>
      </div>

      <div class="field">
        <label>Informações importantes (1 por linha)</label>
        <textarea id="importantLines"></textarea>
      </div>

      <div class="field">
        <label>Descrição (texto longo)</label>
        <textarea id="descriptionText"></textarea>
      </div>

      <hr class="sep"/>

      <div class="field">
        <label>Pagamentos</label>
        <label><input type="checkbox" id="payPix"> Pix</label>
        <label><input type="checkbox" id="payCard"> Cartão</label>
        <label><input type="checkbox" id="payBoleto"> Boleto</label>
      </div>

      <hr class="sep"/>

      <h3 style="margin-bottom:8px;">Topo (Logo)</h3>
      <div class="grid2">
        <div class="field">
          <label>Upload de logo</label>
          <input id="logoFile" type="file" accept="image/png,image/jpeg,image/webp,image/svg+xml" />
        </div>
        <div class="field">
          <label>Logo URL</label>
          <input id="logoUrl" placeholder="(preenchido automaticamente no upload)" />
        </div>
      </div>

      <div class="grid2">
        <div class="field">
          <label>Alinhamento</label>
          <select id="logoAlign">
            <option value="center">Centro</option>
            <option value="left">Esquerda</option>
          </select>
        </div>
        <div class="field">
          <label>Cor topo</label>
          <select id="topBg">
            <option value="white">Branco</option>
            <option value="purple">Lilás</option>
          </select>
        </div>
      </div>

      <hr class="sep"/>

      <h3 style="margin-bottom:8px;">Imagens do produto</h3>

      <div class="field">
        <label>Upload de imagens (várias)</label>
        <input id="imgsFile" type="file" accept="image/png,image/jpeg,image/webp" multiple />
        <div class="muted small">Dica: a primeira imagem da lista vira a imagem principal do produto.</div>
      </div>

      <div class="field">
        <label>Lista de imagens (clique em Remover ou Definir como principal)</label>
        <div id="imagesList" class="imagesList miniBox"></div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
        <button id="btnSave" class="btn btn--primary">Salvar no servidor</button>
        <a class="btn" href="./index.html">Abrir página do produto</a>
      </div>

      <p id="msg" class="muted" style="margin-top:10px;"></p>
    </div>
  </main>

  <script type="module" src="../assets/js/admin-online.js"></script>
</body>
</html>
